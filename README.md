‚òÅÔ∏è Cloud Storage Service
–û –ø—Ä–æ–µ–∫—Ç–µ
Cloud Storage Service ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –≤ —Ä–∞–º–∫–∞—Ö –¥–∏–ø–ª–æ–º–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞. –°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å, —Å–∫–∞—á–∏–≤–∞—Ç—å, —É–¥–∞–ª—è—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–≤–æ–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏ –≤ –æ–±–ª–∞–∫–µ.

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT —Ç–æ–∫–µ–Ω–æ–≤
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
‚úÖ –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏–∑ –æ–±–ª–∞–∫–∞
‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
‚úÖ –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
‚úÖ –†–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ ‚Äî –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ñ–∞–π–ª—ã
‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π (BCrypt)
‚úÖ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
–ë—ç–∫–µ–Ω–¥:
Java 17
Spring Boot 3.3.0
Spring Security + JWT
Spring Data JPA
PostgreSQL 15
Maven
Docker

–§—Ä–æ–Ω—Ç–µ–Ω–¥:
Vue.js 3
TypeScript
Vuex
Axios
Vue Router

–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker Desktop
–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Java 17+
–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Maven
–£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Node.js 18+ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞)
Git

–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É
1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
   git clone <url-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è>
   cd CloudService-main
2. –ó–∞–ø—É—Å–∫ –±—ç–∫–µ–Ω–¥–∞ (Docker)
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
mvn clean package -DskipTests

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (PostgreSQL + Spring Boot)
docker-compose up --build -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs cloudapp -f
–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

Started CloudApplication in X.XXX seconds
Tomcat started on port 8081 (http) with context path '/cloud'
3. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   curl -X POST http://localhost:8081/cloud/test/create-test-user
   –û—Ç–≤–µ—Ç:

json
{
"username": "testuser",
"message": "Test user created successfully",
"role": "ROLE_USER"
}
4. –ó–∞–ø—É—Å–∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
   –í–∞—Ä–∏–∞–Ω—Ç –ê: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
   cd C:\Users\<–≤–∞—à-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å>\Downloads\netology-diplom-frontend

# –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
echo "VUE_APP_BASE_URL=http://localhost:8081/cloud" > .env

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ó–∞–ø—É—Å–∫
npm run serve
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω: http://localhost:8080

–í–∞—Ä–∏–∞–Ω—Ç –ë: –ó–∞–ø—É—Å–∫ –≤ Docker
bash
docker-compose -f docker-compose.frontend.yml up -d

–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
–õ–æ–≥–∏–Ω: testuser
–ü–∞—Ä–æ–ª—å: password123

–ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç.

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —á–µ—Ä–µ–∑ curl
1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞:
curl -X POST http://localhost:8081/cloud/login \
-H "Content-Type: application/json" \
-d '{"login":"testuser","password":"password123"}'

2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞:
curl -X POST http://localhost:8081/cloud/file?filename=test.txt \
-H "auth-token: Bearer <–≤–∞—à-—Ç–æ–∫–µ–Ω>" \
-H "Content-Type: multipart/form-data" \
-F "file=@/path/to/file.txt"

3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤:
curl -X GET http://localhost:8081/cloud/list?limit=10 \
-H "auth-token: Bearer <–≤–∞—à-—Ç–æ–∫–µ–Ω>"

4. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞:
curl -X GET http://localhost:8081/cloud/file?filename=test.txt \
-H "auth-token: Bearer <–≤–∞—à-—Ç–æ–∫–µ–Ω>" \
--output downloaded.txt

5. –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞:
curl -X DELETE http://localhost:8081/cloud/file?filename=test.txt \
-H "auth-token: Bearer <–≤–∞—à-—Ç–æ–∫–µ–Ω>"
Docker-–∫–æ–º–∞–Ω–¥—ã
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker logs cloudapp -f
docker logs postgres-dev2

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö
docker-compose down -v

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ —Å –Ω—É–ª—è
docker-compose down -v
mvn clean package -DskipTests
docker-compose up --build -d
–î–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
docker exec -it postgres-dev2 psql -U postgres -d clouddb
–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º
–ë—ç–∫–µ–Ω–¥ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs cloudapp

# –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø–æ—Ä—Ç —Å–≤–æ–±–æ–¥–µ–Ω
netstat -ano | findstr :8081
–§—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª:
cat .env
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: VUE_APP_BASE_URL=http://localhost:8081/cloud
–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (F12 ‚Üí Console)401 Unauthorized –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
curl http://localhost:8081/cloud/test/users

# –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X POST http://localhost:8081/cloud/test/create-test-user

–¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏ 
–õ–æ–≥–∏–Ω –ü–∞—Ä–æ–ª—å –†–æ–ª—å
testuser	password123	ROLE_USER
admin admin123 ROLE_ADMIN
user user123 ROLE_USER

–í —Ö–æ–¥–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±—ã–ª–∏ —Ä–µ—à–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏:
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è JWT —Å –±–µ–∑–æ–ø–∞—Å–Ω—ã–º –∫–ª—é—á–æ–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –¥–≤—É—Ö UserDetailsService –≤ Spring Security
‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Å URL (–¥–≤–æ–π–Ω–æ–π /cloud –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö)
‚úÖ StackOverflowError –≤ AuthenticationManager
‚úÖ WeakKeyException –≤ JWT (–∫–ª—é—á —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 256 –±–∏—Ç)
‚úÖ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å —Ç–æ–º–æ–º –¥–ª—è PostgreSQL

üë®‚Äçüíª –ê–≤—Ç–æ—Ä
–°—Ç—É–¥–µ–Ω—Ç: –®. –ê–±–¥—É–ª–ª–∞–µ–≤
–ö—É—Ä—Å: Java-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
–ü—Ä–æ–µ–∫—Ç: –î–∏–ø–ª–æ–º–Ω–∞—è —Ä–∞–±–æ—Ç–∞ "–û–±–ª–∞—á–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ"

üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
–ü—Ä–æ–µ–∫—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö –≤ —Ä–∞–º–∫–∞—Ö –¥–∏–ø–ª–æ–º–Ω–æ–π —Ä–∞–±–æ—Ç—ã.
